(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,function(e,t,n){e.exports={login:"Login_login__34Kyk",control:"Login_control__19wOw",invalid:"Login_invalid__CLhCa",actions:"Login_actions__3iF4A"}},,,,,function(e,t,n){e.exports={card:"Card_card__JWs8A"}},function(e,t,n){e.exports={button:"Button_button__iAZ85"}},function(e,t,n){e.exports={home:"Home_home__s0gKX"}},function(e,t,n){e.exports={input:"AddReason_input__3d4vk"}},function(e,t,n){e.exports={items:"ReasonList_items__3kCzz"}},function(e,t,n){e.exports={nav:"Navigation_nav__2MvZo"}},function(e,t,n){e.exports={"main-header":"MainHeader_main-header__vq-1R"}},,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(7),i=n.n(o),s=(n(23),n(2)),r=n(8),u=n.n(r),l=n(0),d=function(e){return Object(l.jsx)("div",{className:"".concat(u.a.card," ").concat(e.className),children:e.children})},j=n(3),b=n.n(j),f=n(9),v=n.n(f),O=function(e){return Object(l.jsx)("button",{type:e.type||"button",className:"".concat(v.a.button," ").concat(e.className),onClick:e.onClick,disabled:e.disabled,children:e.children})},h=c.a.createContext({isLoggedIn:!1,onLogout:function(){},onLogin:function(e,t){}}),x=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){"1"===localStorage.getItem("isLoggedIn")&&o(!0)}),[]);return Object(l.jsx)(h.Provider,{value:{isLoggedIn:c,onLogout:function(){localStorage.removeItem("isLoggedIn"),o(!1)},onLogin:function(e,t){localStorage.setItem("isLoggedIn","1"),o(!0)}},children:e.children})},m=h,p=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:"andreya"===t.val}:"INPUT_BLUR"===t.type?{value:e.value,isValid:"andreya"===e.value}:{value:"",isValid:!1}},g=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:"andreya"===t.val}:"INPUT_BLUR"===t.type?{value:e.value,isValid:"andreya"===e.value}:{value:"",isValid:!1}},_=function(e){var t=Object(a.useContext)(m),n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1],r=Object(a.useReducer)(p,{value:"",isValid:null}),u=Object(s.a)(r,2),j=u[0],f=u[1],v=Object(a.useReducer)(g,{value:"",isValid:null}),h=Object(s.a)(v,2),x=h[0],_=h[1];Object(a.useEffect)((function(){return console.log("EFFECT RUNNING"),function(){console.log("EFFECT CLEANUP")}}),[]);var y=j.isValid,N=x.isValid;Object(a.useEffect)((function(){var e=setTimeout((function(){console.log("Checking form validity!"),i(y&&N)}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[y,N]);return Object(l.jsx)(d,{className:b.a.login,children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.onLogin(j.value,x.value)},children:[Object(l.jsxs)("div",{className:"".concat(b.a.control," ").concat(!1===j.isValid?b.a.invalid:""),children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("input",{type:"name",id:"name",value:j.value,onChange:function(e){f({type:"USER_INPUT",val:e.target.value})},onBlur:function(){f({type:"INPUT_BLUR"})}})]}),Object(l.jsxs)("div",{className:"".concat(b.a.control," ").concat(!1===x.isValid?b.a.invalid:""),children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",id:"password",value:x.value,onChange:function(e){_({type:"USER_INPUT",val:e.target.value})},onBlur:function(){_({type:"INPUT_BLUR"})}})]}),Object(l.jsx)("div",{className:b.a.actions,children:Object(l.jsx)(O,{type:"submit",className:b.a.btn,disabled:!o,children:"Login"})})]})})},y=n(4),N=n(5),L=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(s.a)(o,2),r=i[0],u=i[1],l=Object(a.useCallback)(function(){var e=Object(N.a)(Object(y.a)().mark((function e(t,n){var a,o;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),u(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?JSON.stringify(t.body):null});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,a.json();case 10:o=e.sent,n(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),u(e.t0.message||"Something went wrong!");case 17:c(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:r,sendRequest:l}},R=n(10),C=n.n(R),I=n(11),U=n.n(I),S=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1];return Object(l.jsx)(d,{className:U.a.input,children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==c&&(e.onAddReason(c),o(""))},children:[Object(l.jsx)("label",{htmlFor:"text",children:"Reason to love Andie"}),Object(l.jsx)("input",{id:"text",type:"text",value:c,onChange:function(e){o(e.target.value)}}),Object(l.jsx)(O,{type:"submit",children:"Add Reason"})]})})},E=n(12),w=n.n(E),k=function(e){return Object(l.jsxs)(O,{className:w.a.items,children:[Object(l.jsx)("h4",{children:"Reasons to love Andie"}),Object(l.jsx)("ul",{children:e.items.map((function(e){return Object(l.jsx)("li",{children:e.text},e.id)}))})]})},T=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=L().sendRequest;Object(a.useEffect)((function(){o({url:"https://bondi-8a94c-default-rtdb.firebaseio.com/reasons.json"},(function(e){var t=[];for(var n in e)t.push({id:n,text:e[n].text});c(t)}))}),[o]);var i=function(e,t){var n=t.name;u({id:n,text:e})},r=function(){var e=Object(N.a)(Object(y.a)().mark((function e(t){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({url:"https://bondi-8a94c-default-rtdb.firebaseio.com/reasons.json",method:"POST",headers:{"Content-Type":"application/json"},body:{text:t}},i.bind(null,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){c((function(t){return t.concat(e)}))};return Object(l.jsxs)("div",{className:C.a.home,children:[Object(l.jsx)(S,{onAddReason:r}),Object(l.jsx)(k,{items:n})]})},P=n(13),V=n.n(P),A=function(){var e=Object(a.useContext)(m);return Object(l.jsx)("nav",{className:V.a.nav,children:Object(l.jsx)("ul",{children:e.isLoggedIn&&Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:e.onLogout,children:"Logout"})})})})},B=n(14),F=n.n(B),q=function(){return Object(l.jsxs)("header",{className:F.a["main-header"],children:[Object(l.jsx)("h1",{children:"Bondi"}),Object(l.jsx)(A,{})]})};var J=function(){var e=Object(a.useContext)(m);return Object(l.jsxs)(c.a.Fragment,{children:[Object(l.jsx)(q,{}),Object(l.jsxs)("main",{children:[!e.isLoggedIn&&Object(l.jsx)(_,{}),e.isLoggedIn&&Object(l.jsx)(T,{})]})]})};i.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(x,{children:Object(l.jsx)(J,{})}))}],[[25,1,2]]]);
//# sourceMappingURL=main.1ed487f1.chunk.js.map